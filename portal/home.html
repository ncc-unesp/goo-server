<script id="home" type="text/html">
<div id="myCarousel" class="carousel">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>
    <div class="carousel-inner">
        <div class="item active">
            <img src="img/3.jpg" alt="">

            <div class="carousel-caption">
                <h1><strong>249</strong> active users, <strong>52</strong> projects in <strong>9</strong> research fields.</h1>
            </div>
        </div>

        <div class="item">
            <img src="img/2.jpg" alt="">
            <div class="carousel-caption">
                <h1><strong>368</strong> hosts, <strong>2944</strong> cores and <strong>33 TeraFlops</strong></h1>
            </div>

        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>

<section class="container stats">
<div class="row">
<style media="screen" type="text/css">
.fbox {
    margin:20px;
}
</style>
<div class="col-md-4 span4">
        <div class="fbox center span4">
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-jobs-running"></div>
                <div class="ftext-title">running</div>
                <div class="ftext-title2">jobs</div>
                <p>this is the amount of jobs running <strong>just now</strong> in our cluster.</p>
            </div>
        </div>

        <div class="fbox center span4">
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-avg-time"></div>
                <div class="ftext-title">avg running</div>
                <div class="ftext-title2">time</div>
                <p>the average of running time of completed jobs in the <strong>current mounth</strong> (in minutes).</p>
            </div>
        </div>

        <div class="fbox center span4">
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-processed-hours"></div>
                <div class="ftext-title">processed</div>
                <div class="ftext-title2">hours</div>
                <p>in the <strong>current month</strong>, this the amount of hours that our cluster processed.</p>
            </div>
        </div>
</div>

<div class="col-md-8 span8">
    <iframe height="320px" width="480px" src="https://www.youtube.com/embed/U-HUnvawyvU?rel=0&autoplay=0&showinfo=0&controls=1" autoplay="0" showinfo="0" control="1" frameborder="0" style="margin-top: 20px; margin-bottom: 0px"></iframe>
<h3>Discover our new job control system</h3>
</div>

</div>
<!--
               <h3>Our last stats</h3>
               <h4>* updates can be delayed by 30 minutes.</h4>
</section>

<div class="container">
        <div class="fbox center span3">
            <div class="fchart center" id="chart01"></div>
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-jobs-running"></div>
                <div class="ftext-title">running</div>
                <div class="ftext-title2">jobs</div>
                <p>this is the amount of jobs running <strong>just now</strong>
in our cluster. <a href="">Read more</a></p>
            </div>
        </div>

        <div class="fbox center span3">
            <div class="fchart center" id="chart05"></div>
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-avg-time"></div>
                <div class="ftext-title">avg running</div>
                <div class="ftext-title2">time</div>
                <p>the average of running time of completed jobs in the
<strong>current mounth</strong> (in minutes). <a href="">Read more</a></p>
            </div>
        </div>

        <div class="fbox center span3">
            <div class="fchart center" id="chart02"></div>
            <div class="ftext center">
                <div class="ftext-number" id="goo-stats-processed-hours"></div>
                <div class="ftext-title">processed</div>
                <div class="ftext-title2">hours</div>
                <p>in the <strong>current month</strong>, this the amount of
hours that our cluster processed. <a href="">Read more</a></p>
            </div>
        </div>

</div>

<div class="container">
        <div class="fbox center span3">

            <div class="ftext center tall">
                <div class="ftext-number" id="goo-stats-quality"></div>
                <div class="ftext-title">service</div>
                <div class="ftext-title2">quality</div>
                <p>Our quality of service in the <strong>current month</strong>. <a href="">Read more</a></p>
            </div>

            <div class="ftext center tall">
                <div class="ftext-number" id="goo-stats-jobs-queue"></div>
                <div class="ftext-title">jobs in</div>
                <div class="ftext-title2">queue</div>
                <p>this is the amount of jobs running <strong>just now</strong> in our cluster. <a href="">Read more</a></p>
            </div>
        </div>

        <div class="fbox center span6">
            <div class="fchart pie center" id="chart06"></div>
            <div class="ftext center">
                <p>Percentage of applications which were executed in our grid in
the <strong>current month</strong>.</p>
            </div>
        </div>



</div>

<div class="container">
<hr><h4>Jobs Comming From</h4>
        <div class="fbox center span11">
            <div class="fmap center" id="map"></div>
        </div>
</div>

</div>
<script language="javascript">

var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S").parse;

/* Draw Jobs Stats */
$.get('/api/v1/stats/jobs/').done(function(data) {
    objects = data.objects;
    for (o in objects) {
        item = objects[o];
        item.date = parseDate(item.date);
    }
    draw_line(objects, "#chart01");
})

/* Draw Hours Stats */
$.get('/api/v1/stats/hours/').done(function(data) {
    objects = data.objects;
    for (o in objects) {
        item = objects[o];
        item.date = parseDate(item.date);
    }
    draw_line(objects, "#chart02");
})

/* Draw Avg Time Stats */
$.get('/api/v1/stats/avgtime/').done(function(data) {
    objects = data.objects;
    draw_bar(objects, "#chart05");
})

$.get('/api/v1/stats/apps/').done(function(data) {
    objects = data.objects;
    draw_pie(objects, "#chart06");
})


/* Get some metrics */
$.get('/api/v1/stats/general/').done(function(data) {
    objects = data.objects;

    queue = objects[0].value;
    $('#goo-stats-jobs-queue').text(queue);

    running = objects[1].value;
    $('#goo-stats-jobs-running').text(running);

    quality = objects[2].value;
    $('#goo-stats-quality').text(quality);

    avg_time = objects[3].value;
    $('#goo-stats-avg-time').text(avg_time);

    processed_hours = objects[4].value;
    $('#goo-stats-processed-hours').text(processed_hours);


})

draw_map("json/world.json", "#map");
</script>
-->
</script>
